<main class="h-screen px-4">
    <div class="flex-1">
        <div class="flex flex-row items-center justify-end mb-4 space-x-2 p-2 top-0">
            <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2.2"
            stroke="currentColor"
            class="w-5 h-5  text-black">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
          </svg>
       
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 21 25"
            fill="none"
            class="w-5 h-5 mt-1 text-black">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M2.62501 8.125C2.62501 6.03642 3.4547 4.03338 4.93155 2.55653C6.4084 1.07969 8.41143 0.25 10.5 0.25C12.5886 0.25 14.5916 1.07969 16.0685 2.55653C17.5453 4.03338 18.375 6.03642 18.375 8.125V12.3595L20.4248 16.459C20.5191 16.6477 20.5637 16.8574 20.5542 17.0681C20.5447 17.2789 20.4815 17.4837 20.3706 17.6631C20.2597 17.8426 20.1047 17.9907 19.9205 18.0934C19.7362 18.1961 19.5287 18.25 19.3178 18.25H14.8583C14.608 19.2155 14.0442 20.0706 13.2554 20.681C12.4666 21.2915 11.4974 21.6227 10.5 21.6227C9.50259 21.6227 8.5334 21.2915 7.74459 20.681C6.95578 20.0706 6.39201 19.2155 6.14176 18.25H1.68226C1.4713 18.25 1.26383 18.1961 1.07956 18.0934C0.895295 17.9907 0.740343 17.8426 0.629426 17.6631C0.51851 17.4837 0.45531 17.2789 0.44583 17.0681C0.436351 16.8574 0.480905 16.6477 0.575263 16.459L2.62501 12.3595V8.125ZM8.55151 18.25C8.749 18.592 9.03303 18.876 9.37506 19.0735C9.71709 19.2709 10.1051 19.3749 10.5 19.3749C10.895 19.3749 11.2829 19.2709 11.625 19.0735C11.967 18.876 12.251 18.592 12.4485 18.25H8.55151ZM10.5 2.5C9.00817 2.5 7.57743 3.09263 6.52254 4.14752C5.46765 5.20242 4.87501 6.63316 4.87501 8.125V12.3595C4.87499 12.7086 4.79372 13.053 4.63764 13.3652L3.32139 16H17.6798L16.3635 13.3652C16.207 13.0531 16.1254 12.7087 16.125 12.3595V8.125C16.125 6.63316 15.5324 5.20242 14.4775 4.14752C13.4226 3.09263 11.9919 2.5 10.5 2.5Z"
              fill="currentColor" />
          </svg>
          <img
          src="assets/user-photo.jpg"
          alt="Photo de profil"
          class="h-12 w-12 rounded-full mr-4"
        />
          </div>
      <!-- Section principale -->
      <p class="text-xl font-bold">Gestion des Radios</p>
      <p class="text-gray-400 text-xs mt-1">Voir et gérer les radios des patients</p>
      <div class="border-t border-gray-300 mt-4"></div>
      <!-- bare de recherche -->
      <div class="p-2 border border-gray-300 w-[50%] rounded-full flex flex-row   items-center justify-between mt-4">
        <div class="flex flex-row ">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
            </svg>
            <input
            type="text"
            placeholder="Rechercher..."
            class="text-sm text-gray-700 focus:outline-none ml-2"
            />
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z" />
        </svg>
    </div>
      <div class="overflow-x-auto mt-5 h-[70%]">
        <table class="table-auto w-full text-left text-sm text-gray-600">
          <thead>
            <tr class="border-b bg-gray-100">
              <th class="py-2 px-4">NSS</th>
              <th class="py-2 px-4">Date</th>
              <th class="py-2 px-4">Type de Radio</th>
              <th class="py-2 px-4">Statut</th>
              <th class="py-2 px-4">Actions</th>
            </tr>
          </thead>
          <tbody class="">
            <tr *ngFor="let radio of paginatedRadios" class="hover:bg-gray-50 space-y-2">
              <td class="py-2 px-4">{{ radio?.nss }}</td>
              <td class="py-2 px-4">{{ radio?.date }}</td>
              <td class="py-2 px-4">{{ radio?.type }}</td>
              <td class="py-2 px-4">
                <span
                class="py-2 text-sm rounded-full text-white font-bold"
                [ngClass]="{
                  'bg-[#2D6974] px-9 ': radio.statut === 'Traité',
                  'bg-[#FCC698] px-5 ': radio.statut === 'Non traité',
                }"
              >
                {{ radio.statut }}
              </span>

              
              </td>
              <td class="py-2 px-4 flex space-x-2">
                <button *ngIf="radio.statut === 'Non traité'" (click)="ajouterImageRadio(radio)">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5">
                    <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
                  </svg>
                  
                  
                </button>
                <button *ngIf="radio.statut === 'Traité'" (click)="voirImageRadio(radio)">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5">
                    <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                    <path fill-rule="evenodd" d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z" clip-rule="evenodd" />
                  </svg>
                  
                  
                </button>
              </td>
              
            </tr>
          </tbody>
        </table>
      
       


            <!-- Pagination -->
            <div class="grid grid-cols-3 mt-9 self-center justify-items-center fixed bottom-10 w-[80%]">

                    <button
                    class="text-md text-gray-600   "
                    [disabled]="currentPage === 1"
                    (click)="changePage(currentPage - 1)"
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 ">
                        <path fill-rule="evenodd" d="M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
                    </svg>                      
                    </button>
                <div class=" space-x-2">
                    <button
                        *ngFor="let page of [].constructor(Math.ceil(radios.length / itemsPerPage)); let i = index"
                        (click)="changePage(i + 1)"
                        [class.bg-[#2D6974]]="currentPage === i + 1"
                        [class.text-white]="currentPage === i + 1"
                        class="px-3 py-1 rounded-md "
                    >
                        {{ i + 1 }}
                    </button>
                </div>
                <button
                    class=" text-gray-600 text-md  "
                    [disabled]="currentPage === Math.ceil(radios.length / itemsPerPage)"
                    (click)="changePage(currentPage + 1)"
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                        <path fill-rule="evenodd" d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                    </svg>
                    
                </button>
            </div> 
            <!-- Popup -->
            <div
            *ngIf="popupVisible"
            class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50"
          >
            <div class="bg-white rounded-lg shadow-lg p-6 md:w-1/3 w-11/12">
              <!-- En-tête -->
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-gray-700">Télécharger une Image</h3>
                <button
                  class="text-gray-500 hover:text-gray-700 focus:outline-none"
                  (click)="closePopup()"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="2"
                    stroke="currentColor"
                    class="w-6 h-6"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M6 18L18 6M6 6l12 12"
                    />
                  </svg>
                </button>
              </div>
          
              <!-- Corps : Zone de fichier -->
              <div
                class="border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center p-6 text-center"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                  stroke="currentColor"
                  class="w-12 h-12 text-gray-400 mb-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 16.5V18a2 2 0 002 2h14a2 2 0 002-2v-1.5M16.5 10.5L12 15m0 0l-4.5-4.5M12 15V3"
                  />
                </svg>
                <p class="text-gray-600 mb-2">Faites glisser et déposez une image ici</p>
                <p class="text-gray-500 text-sm">ou cliquez pour sélectionner un fichier</p>
                <input
                  type="file"
                  class="hidden"
                  #fileInput
                  (change)="onFileSelected($event)"
                />
                <button
                  class="mt-4 px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600 focus:outline-none"
                  (click)="fileInput.click()"
                >
                  Sélectionner un Fichier
                </button>
              </div>
          
              <!-- Aperçu de l'image -->
              <div *ngIf="fileToUpload" class="mt-4 text-center">
                <img
                  [src]="filePreviewUrl"
                  alt="Aperçu de l'image"
                  class="w-32 h-32 object-cover rounded-lg mx-auto"
                />
                <p *ngIf="fileToUpload" class="text-sm text-gray-600 mt-2">
                  {{ fileToUpload.name }} ({{ (fileToUpload.size || 0) / 1024 | number: '1.0-2' }} KB)
                </p>
                
              </div>
          
              <!-- Boutons -->
              <div class="mt-6 flex justify-end space-x-4">
                <button
                  class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:outline-none"
                  (click)="closePopup()"
                >
                  Annuler
                </button>
                <button
                  class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none"
                  (click)="uploadImage()"
                  [disabled]="!fileToUpload"
                >
                  Télécharger
                </button>
              </div>
            </div>
          </div>
          
          
          <div *ngIf="showImageModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-lg w-[90%] md:w-[50%]">
              <div class="flex flex-row justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Image de la Radio</h2>
                <button (click)="closeImage()" class="text-gray-600 hover:text-black">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                    <path fill-rule="evenodd" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              </div>
              <img [src]="selectedRadioImageUrl" alt="Image Radio" class="w-full">
            </div>
          </div>
          
              
      
    
      </div>
    </div>
</main>
  