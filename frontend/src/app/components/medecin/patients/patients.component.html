<main class="h-screen px-4">
    <div class="flex-1  ">
        <!-- Sidebar pour petits écrans -->
       <div class="flex flex-row items-center justify-end mb-4 space-x-2 p-2 top-0">
         <svg
         xmlns="http://www.w3.org/2000/svg"
         fill="none"
         viewBox="0 0 24 24"
         stroke-width="2.2"
         stroke="currentColor"
         class="w-5 h-5  text-black">
         <path
           stroke-linecap="round"
           stroke-linejoin="round"
           d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
       </svg>
    
       <svg
         xmlns="http://www.w3.org/2000/svg"
         viewBox="0 0 21 25"
         fill="none"
         class="w-5 h-5 mt-1 text-black">
         <path
           fill-rule="evenodd"
           clip-rule="evenodd"
           d="M2.62501 8.125C2.62501 6.03642 3.4547 4.03338 4.93155 2.55653C6.4084 1.07969 8.41143 0.25 10.5 0.25C12.5886 0.25 14.5916 1.07969 16.0685 2.55653C17.5453 4.03338 18.375 6.03642 18.375 8.125V12.3595L20.4248 16.459C20.5191 16.6477 20.5637 16.8574 20.5542 17.0681C20.5447 17.2789 20.4815 17.4837 20.3706 17.6631C20.2597 17.8426 20.1047 17.9907 19.9205 18.0934C19.7362 18.1961 19.5287 18.25 19.3178 18.25H14.8583C14.608 19.2155 14.0442 20.0706 13.2554 20.681C12.4666 21.2915 11.4974 21.6227 10.5 21.6227C9.50259 21.6227 8.5334 21.2915 7.74459 20.681C6.95578 20.0706 6.39201 19.2155 6.14176 18.25H1.68226C1.4713 18.25 1.26383 18.1961 1.07956 18.0934C0.895295 17.9907 0.740343 17.8426 0.629426 17.6631C0.51851 17.4837 0.45531 17.2789 0.44583 17.0681C0.436351 16.8574 0.480905 16.6477 0.575263 16.459L2.62501 12.3595V8.125ZM8.55151 18.25C8.749 18.592 9.03303 18.876 9.37506 19.0735C9.71709 19.2709 10.1051 19.3749 10.5 19.3749C10.895 19.3749 11.2829 19.2709 11.625 19.0735C11.967 18.876 12.251 18.592 12.4485 18.25H8.55151ZM10.5 2.5C9.00817 2.5 7.57743 3.09263 6.52254 4.14752C5.46765 5.20242 4.87501 6.63316 4.87501 8.125V12.3595C4.87499 12.7086 4.79372 13.053 4.63764 13.3652L3.32139 16H17.6798L16.3635 13.3652C16.207 13.0531 16.1254 12.7087 16.125 12.3595V8.125C16.125 6.63316 15.5324 5.20242 14.4775 4.14752C13.4226 3.09263 11.9919 2.5 10.5 2.5Z"
           fill="currentColor" />
       </svg>
       <img
       src="assets/user-photo.jpg"
       alt="Photo de profil"
       class="h-12 w-12 rounded-full mr-4"
     />
       </div>
       <!-- section principale -->
        <p class="text-xl font-bold ">Les patients :</p>
        <p class="text-gray-400 text-xs mt-1">Voir tous les dossiers des patients</p>
        <div class="border-t border-gray-300 mt-4"></div>
        <div class="flex flex-row justify-between mt-4">
            <div class="p-2 border border-gray-300 w-[50%] rounded-full flex flex-row   items-center justify-between">
                <div class="flex flex-row">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                    <input
                    type="text"
                    placeholder="Rechercher..."
                    class="text-sm text-gray-700 focus:outline-none ml-2"
                    />
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z" />
                </svg>
            </div>
            <button       
            (click)="toggleAjouterPatient()"
             class="px-4 py-2 bg-[#2D6974] flex flex-row items-center justify-center rounded-full text-sm font-bold   text-white">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="white" class="size-4 mr-2 ">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                </svg>
                
                Ajouter Patient 
            </button>
        </div>
        <!-- Pop up ajouter patient -->
        <div
        *ngIf="ajouterPatientVisible"
        class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50"
      >
        <div class="bg-gray-100 p-6 rounded-lg shadow-lg w-[90%] md:w-[50%] relative">
              
          <!-- Contenu du popup -->
           <div class="flex flex-row justify-between items-baseline">
                <p class="text-xl font-bold mb-4">Ajouter un Patient</p>
                <button
                    (click)="toggleAjouterPatient()"
                    class=" text-gray-500 hover:text-gray-800"
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                        <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                    </svg>
              
                 </button>
           </div>
           <div class="border-t border-gray-300 "></div>
           <div class="flex flex-col ">
                <div class="flex flex-row justify-start items-center mt-6">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5 mr-2">
                        <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
                    </svg>
                    <p class="font-bold text-sm">Informations personnelles</p>
                </div>
                <div class="grid  grid-cols-3 gap-3 justify-between items-center mt-4">
                    <div>
                        <label for="Nom" class="block text-sm font-medium">Nom :</label>
                        <input
                            id="Nom"
                            type="text"
                            class="w-full border border-gray-300 rounded-lg p-2"
                            placeholder="Entrez le nom"
                            [(ngModel)]="patientForm.nom"

                        />
                    </div>
                    <div>
                        <label for="Prenom" class="block text-sm font-medium">Prénom :</label>
                        <input
                        id="prenom"
                        type="text"
                        class="w-full border border-gray-300 rounded-lg p-2"
                        placeholder="Entrez le Prénom"
                        [(ngModel)]="patientForm.prenom"

                        />
                    </div>
                    <div>
                        <label for="sexe" class="block text-sm font-medium">Sexe :</label>
                        <select
                        id="sexe"
                        class="w-full border border-gray-300 rounded-lg p-2 text-gray-400"
                        [(ngModel)]="patientForm.sexe"

                        >
                        <option value="" disabled selected>Choisir...</option>
                        <option value="Homme">Homme</option>
                        <option value="Femme">Femme</option>
                        </select>
                    </div>
                
                </div>
                <div class="grid  grid-cols-3 gap-3 justify-between items-center mt-4">
                    <div>
                        <label for="NSS" class="block text-sm font-medium">Numéro Sécurité Sociale :</label>
                        <input
                            type="text"
                            class="w-full border border-gray-300 rounded-lg p-2"
                            placeholder="Entrez le NSS"
                            [(ngModel)]="patientForm.nss"

                        />
                    </div>
                    <div>
                        <label for="mutuelle" class="block text-sm font-medium">mutuelle:</label>
                        <input
                        type="text"
                        class="w-full border border-gray-300 rounded-lg p-2"
                        placeholder="Mutuelle"
                        [(ngModel)]="patientForm.mutuelle"

                        />
                    </div>
                    <div>
                        <label for="dateNaissance" class="block text-sm font-medium">Date de naissance :</label>
                        <input
                          id="dateNaissance"
                          type="date"
                          class="w-full border border-gray-300 rounded-lg p-2 text-gray-400"
                          placeholder="Entrez la date de naissance"
                          [(ngModel)]="patientForm.dateNaissance"

                        />
                      </div>
                
                </div>
                <div class="flex flex-row justify-start items-center mt-6">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5 mr-2">
                        <path fill-rule="evenodd" d="M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z" clip-rule="evenodd" />
                      </svg>                      
                    <p class="font-bold text-sm">Informations de contact</p>
                </div>
                <div class="grid grid-cols-2 gap-4 items-center mt-4">
                    <div>
                        <label for="NSS" class="block text-sm font-medium">Adresse :</label>
                        <input
                            type="text"
                            class="w-full border border-gray-300 rounded-lg p-2"
                            placeholder="Entrez le l'adresse"
                            [(ngModel)]="patientForm.adresse"

                        />
                    </div>
                    <div>
                        <label for="mutuelle" class="block text-sm font-medium">N° téléphone:</label>
                        <input
                        type="text"
                        class="w-full border border-gray-300 rounded-lg p-2"
                        placeholder="Entrer le n° de téléphone"
                        [(ngModel)]="patientForm.telephone"

                        />
                    </div>
                   
                
                </div>
                <label class="block text-sm font-medium">Personnes à contacter :</label>
                <div class="overflow-x-auto w-full   p-2 rounded-lg">
                  <!-- Liste des contacts -->
                  <div class="flex space-x-2">
                    <div *ngFor="let contact of contacts; let i = index" class="flex flex-row space-x-1 items-center">
                      <input
                        type="text"
                        class="border border-gray-300 rounded-lg p-2"
                        [placeholder]="'Contact ' + (i + 1)"
                        [(ngModel)]="patientForm.contacts[i]"
                        />
                      <button
                        type="button"
                        class="bg-gray-300 text-white px-2 py-1 rounded-lg mt-1"
                        (click)="removeContact(i)"
                      >
                        -
                      </button>
                    </div>
                    <!-- Ajouter un contact -->
                    <button
                      type="button"
                      class="bg-[#2D6974] text-white px-2  rounded-lg  font-medium"
                      (click)="addContact()"
                    >
                      + 
                    </button>
                  </div>
                </div>
                <div class="flex flex-row justify-start items-center mt-6">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5 mr-2">
                    <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
                  </svg>
                  
                  <p class="font-bold text-sm">Informations médicales</p>
                  
                </div>
                <div class="grid  grid-cols-2 gap-3 justify-between items-center mt-4">
                  <div>
                      <label for="Nom" class="block text-sm font-medium">Nom :</label>
                      <input
                          id="Nom"
                          type="text"
                          class="w-full border border-gray-300 rounded-lg p-2"
                          placeholder="Entrez le nom"
                      />
                  </div>
                  <div>
                      <label for="Prenom" class="block text-sm font-medium">Prénom :</label>
                      <input
                      id="prenom"
                      type="text"
                      class="w-full border border-gray-300 rounded-lg p-2"
                      placeholder="Entrez le Prénom"
                      />
                  </div>
                  
              
                </div>
                    
                <div class="border-t border-gray-300 mt-4 "></div>  
                <div class="flex flex-row justify-end items-end space-x-2  mt-4">
                  <button 
                  (click)="toggleAjouterPatient()"      
                  class="px-4 py-2 bg-white flex flex-row items-center justify-center rounded-full text-sm font-bold   text-black">                      
                     Annuler  
                 </button>
                  <button  
                  (click)="ajouterPatient()"
                   class="px-4 py-2 bg-[#2D6974]  rounded-full text-sm font-bold   text-white">                      
                      Ajouter  
                  </button>
                 
                </div>
                
        </div>
           
        </div>
        </div>
        <div class="overflow-x-auto mt-5 h-[70%]">
            <table class="table-auto w-full text-left text-sm  text-gray-600">
              <thead>
                <tr class="border-b bg-gray-100  ">
                  <th class="py-2 px-4">NSS</th>
                  <th class="py-2 px-4">Nom et Prénom</th>
                  <th class="py-2 px-4">Numéro de Téléphone</th>
                  <th class="py-2 px-4">Date d'entrée</th>
                  <th class="py-2 px-4">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let patient of paginatedPatients" class="hover:bg-gray-50">
                    <td class="py-2 px-4">{{ patient.nss }}</td>
                  <td class="py-2 px-4">{{ patient.nom }} {{ patient.prenom }}</td>
                  <td class="py-2 px-4">{{ patient.telephone }}</td>
                  <td class="py-2 px-4">{{ patient.dateEntree }}</td>
                  <td class="py-2 px-4 flex space-x-3">
                    <!-- Modifier -->
                    <button class="" (click)="modifierPatient(patient)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5">
                            <path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z" />
                            <path d="M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z" />
                          </svg>                          
                    </button>
                    <!-- Supprimer -->
                    <button class="" (click)="supprimerPatient(patient)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5">
                            <path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd" />
                          </svg>
                          
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
     
                <!-- Pagination -->
                <div class="grid grid-cols-3 mt-9 self-center justify-items-center fixed bottom-4 w-[80%]">

                        <button
                        class="text-md text-gray-600   "
                        [disabled]="currentPage === 1"
                        (click)="changePage(currentPage - 1)"
                        >
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 ">
                            <path fill-rule="evenodd" d="M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
                        </svg>                      
                        </button>
                    <div class=" space-x-2">
                        <button
                            *ngFor="let page of [].constructor(Math.ceil(patients.length / itemsPerPage)); let i = index"
                            (click)="changePage(i + 1)"
                            [class.bg-[#2D6974]]="currentPage === i + 1"
                            [class.text-white]="currentPage === i + 1"
                            class="px-3 py-1 rounded-md "
                        >
                            {{ i + 1 }}
                        </button>
                    </div>
                    <button
                        class=" text-gray-600 text-md  "
                        [disabled]="currentPage === Math.ceil(patients.length / itemsPerPage)"
                        (click)="changePage(currentPage + 1)"
                        >
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                            <path fill-rule="evenodd" d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                        </svg>
                      
                    </button>
                </div>     
     </div>
</main>
